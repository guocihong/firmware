/*C**************************************************************************
* NAME:   adc_drv.c
*----------------------------------------------------------------------------
* Copyright (c) 2011.
*----------------------------------------------------------------------------
* RELEASE:      2011.01.13
* REVISION:     1.0     
*----------------------------------------------------------------------------
* PURPOSE:
*   This file contains the ADC driver routines.
*****************************************************************************/


/*_____ I N C L U D E S ____________________________________________________*/
#include "config.h"          /* lib configuration header */
#include "adc_drv.h"         /* adc driver definition */



/*F***************************************************************************
* NAME:   adc_set_prio
*-----------------------------------------------------------------------------
* PARAMS: 
*         priority ： 优先级值, 范围 0 ~ 3
* return: 
*----------------------------------------------------------------------------
* PURPOSE: Set the ADC interrupt priority 
*----------------------------------------------------------------------------
* REQUIREMENTS:
******************************************************************************/
void adc_set_prio(Byte priority)
{
  PADC = 0;       //复位至优先值0
  IPH &= ~PADCH_;

  if ((priority == 1) || (priority == 3))     // set LOW priority bit
  {
    PADC = 1;
  }
  if ((priority == 2) || (priority == 3))     // set HIGH priority bit
  {
    IPH |= PADCH_;
  }
}


/*F**************************************************************************
* NAME: adc_init
*----------------------------------------------------------------------------
* PARAMS:
* return:
*----------------------------------------------------------------------------
* PURPOSE: 
*   ADC initial routine 
*----------------------------------------------------------------------------
* REQUIREMENTS:
*****************************************************************************/
void adc_init(void)
{
  //设置中断优先级
  adc_set_prio(ADC_PRIO);

  //如果允许ADC中断, 使能下列控制位
  //EADC = 1;
}


/*F**************************************************************************
* NAME: ISR_ADC
*----------------------------------------------------------------------------
* PARAMS:
* return:
*----------------------------------------------------------------------------
* PURPOSE: 
*   ADC interrupt service routine 
*----------------------------------------------------------------------------
* EXAMPLE:
*----------------------------------------------------------------------------
* REQUIREMENTS:
*   ADC_CONTR 建议直接使用赋值语句
*****************************************************************************/
/*
void ISR_ADC(void) interrupt ADC_VECTOR using 3
{
  ADC_CONTR = ;	  //必须由用户软件清0

  //读采样值
  
}
*/
